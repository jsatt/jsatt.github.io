<!doctype html><html lang=en-us><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=viewport content="width=device-width">
<title>Mocking a property in Python</title>
<link rel=alternate type=application/rss+xml title=RSS href=https://jsatt.github.io/blog/feeds/rss/>
<link rel=alternate type=application/atom+xml title=Atom href=https://jsatt.github.io/blog/feeds/atom/>
<link rel=stylesheet href=../../static/css/bootstrap.min.css>
<link rel=stylesheet href=../../static/css/font-awesome.min.css>
<link rel=stylesheet href=../../static/css/prism.css>
<link rel=stylesheet href=../../static/css/main.css>
</head>
<body id=page_blog_post><header>
<nav>
<div class=container>
<div class=row>
<div class=col-md-12>
<ul class="nav navbar-nav">
<li id=menu-link-blog><a href=https://jsatt.github.io/blog/>Blog</a></li>
<li id=menu-link-about><a href=https://jsatt.github.io/about/>About</a></li>
</ul>
</div>
</div>
</div>
</nav>
<div class=title><a href=../../>Jeremy Satterfield</a></div>
<div class=tagline>Coding, Making and Tulsa Life</div>
</header>
<section id=content>
<div class=container>
<div class=row>
<article class=col-md-8 itemscope itemtype=http://schema.org/BlogPosting>
<h1 class=headline itemprop=headline>Mocking a property in Python</h1>
<h6 class=post-meta>
Posted by:
<span itemscope itemprop=author itemtype=http://schema.org/Person>
<span itemprop=name>Jeremy Satterfield</span>
</span>
in
<a itemprop=articleSection href=https://jsatt.github.io/categories/development/>development</a>
on <span itemprop=datePublished>2014-08-08</span>
<ul class="list-inline tags">
<li>Tags:</li>
<li><a href=https://jsatt.github.io/tags/mocking/>mocking</a></li><li><a href=https://jsatt.github.io/tags/python/>python</a></li><li><a href=https://jsatt.github.io/tags/testing/>testing</a></li>
</ul>
</h6>
<div class=post itemprop=articleBody>
<p>Anytime I see someone turning an instance method into a property on a Python object, I always have to step back and rethink whether it's really the right thing to do. While properties certain have valid use cases, I often see them overused and misused. This can result in code that is harder to refactor should you decide you actually do want to accept arguments as well as less straight forward to separate in unit tests.</p>
<p>The way I found to deal with the latter case is pretty simple but unituitive at first. Simply stub out the property on the class, then assign the property value on the instance.</p>
<pre class=language-python>
<code># Use __class__ if you don&#39;t have the class imported
self.mox.StubOutWithMock(self.book.__class__, &#39;reviews&#39;)
self.book.editors = [&#39;editor 1&#39;, &#39;editor 2&#39;]

# replace with a MockAnything to go deeper
self.mock.StubOutWithMock(Company, &#39;employees&#39;)
Company.employees = self.mock.CreateMockAnything()
company.employees.are_executives().AndReturn([&#39;CEO&#39;, &#39;COO&#39;, &#39;CIO&#39;])
campaign3.reviews.are_developers().AndReturn([&#39;Jim&#39;, &#39;John&#39;, &#39;Joey&#39;])</code></pre>
</div>
</article>
<aside class=col-md-4>
<nav class=social-icons>
<a href=https://github.com/jsatt rel=me target=_blank><i class="fa fa-github-square"></i></a>
<a href=https://www.facebook.com/jsatt0 rel=me target=_blank><i class="fa fa-facebook-square"></i></a>
<a href=https://twitter.com/jsatt rel=me target=_blank><i class="fa fa-twitter-square"></i></a>
<a href=https://www.linkedin.com/in/jsatterfield rel=me target=_blank><i class="fa fa-linkedin-square"></i></a>
<a href=mailto:jsatt@jsatt.com><i class="fa fa-envelope"></i></a>
<a href target=_blank><i class="fa fa-rss-square"></i></a>
</nav>
<div id=related-posts>
<div class=related-post>
<a href=https://jsatt.github.io/blog/python-catalog/>Python Catalog Data Structures</a>
<div class=timesince>2017-11-10</div>
</div>
<div class=related-post>
<a href=https://jsatt.github.io/blog/virtualenvs-for-all/>Manage All the Languages Using Python Virtualenv</a>
<div class=timesince>2017-10-28</div>
</div>
<div class=related-post>
<a href=https://jsatt.github.io/blog/unit-testing-recursion-in-python/>Unit Testing Recursion in Python</a>
<div class=timesince>2014-12-11</div>
</div>
<div class=related-post>
<a href=https://jsatt.github.io/blog/keeping-mro-in-mind-when-mocking-inherited-methods/>Keeping MRO In Mind When Mocking Inherited Methods</a>
<div class=timesince>2014-10-16</div>
</div>
<div class=related-post>
<a href=https://jsatt.github.io/blog/mocking-pythons-built-in-open-function/>Mocking Python&amp;#39;s built-in open function</a>
<div class=timesince>2014-04-11</div>
</div>
<div class=related-post>
<a href=https://jsatt.github.io/blog/mocking-context-managers-in-python/>Mocking Context Managers in Python</a>
<div class=timesince>2014-02-28</div>
</div>
</div>
<div class=keywords>
<div class=keyword>
<a href=https://jsatt.github.io/tags/python/>#python</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/testing/>#testing</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/django/>#django</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/hacks/>#hacks</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/mocking/>#mocking</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/django-rest-framework/>#django-rest-framework</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/celery/>#celery</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/class-based-views/>#class-based-views</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/data-structures/>#data-structures</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/dev-ops/>#dev-ops</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/docker/>#docker</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/go/>#go</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/linux/>#linux</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/node/>#node</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/nose/>#nose</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/open-source/>#open-source</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/packages/>#packages</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/ruby/>#ruby</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/rust/>#rust</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/tox/>#tox</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/travis-ci/>#travis-ci</a>
</div>
<div class=keyword>
<a href=https://jsatt.github.io/tags/virtualenvs/>#virtualenvs</a>
</div>
</div>
</aside>
</div>
</div>
</section><footer>
<div class=container>
<div class=row>
<div class=col-md-12>
<div class=nav-footer>
<ul class=list-unstyled>
<li id=footer-menu-presentations><a href=https://jsatt.github.io/presentations/>Presentations</a></li>
<li id=footer-menu-resume><a href=https://jsatt.github.io/resume/>Resume</a></li>
</ul>
</div>
</div>
</div>
</div>
</footer>
<script src=../../static/js/jquery.min.js></script>
<script src=../../static/js/prism.js></script>
<script src=../../static/js/bootstrap.min.js></script>
</body>
</html>